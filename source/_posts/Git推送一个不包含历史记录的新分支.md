---
title: Git推送一个不包含历史记录的新分支
date: 2024-07-23 16:08:34
categories:
- Git
tags:
- Git
---

# Git推送一个不包含历史记录的新分支

## 1. 基本概念

在开始之前，让我们先弄清楚一些基本概念：

- 分支：在Git中，分支即是一系列提交的集合，它们形成了一个完整的开发历史。我们可以通过创建新的分支，在其中进行开发工作，而不影响主分支。
- 远程仓库：远程仓库是一个存放在网络上的Git仓库，它用于多人协作开发或备份代码。
- 本地仓库：本地仓库是存放于本地机器上的Git仓库，我们可以在本地进行开发和提交代码。

## 2. 创建新分支

要创建一个新分支，请打开终端（命令行界面），进入项目的根目录，并执行以下命令：

```bash
git checkout -b <branch_name>
```

在上述命令中，`-b`选项用于同时创建并切换到新分支中。`<branch_name>`表示你想要创建的新分支的名称，可以自由定义。

例如，我们要创建一个名为`feature/new-feature`的新分支，可以运行以下命令：

```bash
git checkout -b feature/new-feature
```

## 3. 将新分支推送到远程仓库

创建了新分支后，现在我们需要将其与远程仓库进行关联，并将新分支推送到远程仓库。假设远程仓库的名称为`origin`，我们可以通过以下命令将新分支推送到远程仓库：

```bash
git push origin <branch_name>
```

如果远程仓库还不存在新分支，Git将自动创建并推送。如果远程仓库已存在同名分支，您可能需要使用`-f`选项来强制推送。

例如，推送`feature/new-feature`分支到`origin`远程仓库：

```bash
git push origin feature/new-feature
```

## 4. 不包含历史记录的推送

默认情况下，`git push`命令将会将当前分支的所有提交历史一同推送到远程仓库。然而，在某些情况下，我们可能只希望将新分支推送到远程仓库，而不包含任何历史记录。

为了实现这个目标，我们可以使用`--allow-empty`选项对新分支进行初始化提交。以下是必要的步骤：

#### 步骤 1：初始化新分支

首先，我们需要创建一个空的初始化提交（Empty commit）：

```bash
git commit --allow-empty -m "Initial commit"
```

这个命令会在新分支中创建一个空的提交记录，以确保新分支不是一个空的分支。

#### 步骤 2：将新分支推送到远程仓库

然后，我们可以使用之前的步骤3中介绍的命令将新分支推送到远程仓库：

```bash
git push origin <branch_name>
```
